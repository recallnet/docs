---
title: Using the MinIO CLI
description: Leverage Basin's S3 adapter with MinIO.
---

import { Callout, Steps } from "nextra/components";

<Steps>

### Run the adapter

Start the adapter with the binary installed and flags described in the
[installation](/basin/s3/installation) page.

```sh
basin_s3 --private-key [your_private_key] --access-key AKEXAMPLES3S --secret-key SKEXAMPLES3S
```

This will start the adapter on port `8014` by default. Also, recall the `--network` flag can,
optionally, be provided to point to a specific Hoku chain environment, and logging can be enabled by
passing the `-v` flag.

### Run the S3 client

You can now use an S3-compatible client like MinIO to interact with Basin. First, make sure you have
the MinIO client installed, such as with Homebrew on Mac:

```sh
brew install minio/stable/mc
```

Then, add Basin as an alias to the MinIO configuration, and be sure to specify the API version as
`S3v4`. The URL shown below is the default port for the adapter, but you can change it by specifying
the `--address` flag.

```sh
mc alias set basin http://localhost:8014 AKEXAMPLES3S SKEXAMPLES3S --api s3v4
```

You can verify the alias was set properly with `mc alias list`:

```sh
basin
  URL       : http://localhost:8014
  AccessKey : AKEXAMPLES3S
  SecretKey : SKEXAMPLES3S
  API       : s3v4
  Path      : auto
```

### Create a bucket

Now, you can directly use MinIO to write or read data! Start by creating a bucket:

```sh
mc mb basin/my-store
```

This will create the bucket called `my-store` under your `basin` alias.

<Callout type="warning">

Bucket usage slightly deviates from how you typically would in S3. This happens due to how the S3
adapter works alongside Basin by using metadata to help identify the MinIO bucket name and its
relationship with onchain buckets owned by the creator. To interact with any bucket, the name you
define is always prefixed by the creator's hex address, delimited by a period.

The general format is `<0x_address>.<bucket_name>`, as shown in the example below.

</Callout>

### Check the bucket name

You can check the buckets under your alias with `mc ls basin`. This will list the bucket above with
the name we used:

```sh
[2024-11-20 21:18:07 EST]     0B my-store/
```

However, **this is not the bucket name**! The actual bucket name you'll use looks something like
this:

```sh
0x90f79bf6eb2c4f870365e785982e1f101e93b906.my-store
```

The `0x90f7...` is the public key of the creator (i.e., the private key you used to start the
adapter), and `my-store` is the bucket name we defined earlier.

### Write & read data

You can write to the address that identifies the bucket, where you'd replace `t2pl...` with your
system-defined bucket name:

```sh
mc put ./test.txt basin/0x90f79bf6eb2c4f870365e785982e1f101e93b906.my-store/world
```

Then, you can read the data back via stdout, or download it to a file:

```sh
mc cat basin/0x90f79bf6eb2c4f870365e785982e1f101e93b906.my-store/world
mc get basin/0x90f79bf6eb2c4f870365e785982e1f101e93b906.my-store/world ./downloaded-test.txt
```

</Steps>
