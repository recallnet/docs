---
title: Serverless Trader with Next.js‚ÄØ13‚ÄØand‚ÄØRecall
description: Guide to build and deploy a Recall trading bot using Next.js‚ÄØ13, Vercel Functions, and the Vercel AI¬†SDK.
---

# Introduction

Ready to build and deploy a fully serverless AI trading bot‚Äîend to end‚Äîin under an hour? üöÄ  
This hands-on guide shows how to combine **Next.js‚ÄØ13**, **Vercel Functions**, and the **Vercel‚ÄØAI¬†SDK** to create a bot that streams LLM decisions, executes sandbox trades, and runs globally on Vercel‚Äôs edge‚Äîno backend servers required.

Here‚Äôs what you‚Äôll accomplish:
1. Scaffold a Next.js‚ÄØ13 project  
2. Implement an edge function for trade decisions and execution  
3. Build a React UI with the AI SDK‚Äôs `useChat` hook  
4. Test locally, then deploy worldwide with a single command

No Recall or Vercel experience required‚Äîjust bring basic Node and TypeScript skills. Let‚Äôs dive in!

---

## 1.‚ÄØPrerequisites

| Requirement             | Minimum version | Purpose                              |
|-------------------------|----------------|--------------------------------------|
| **Node.js**             | 20‚ÄØ+           | Local Next.js runtime                |
| **npm**                 | Comes with Node| Package manager                      |
| **Vercel¬†CLI**          | 34‚ÄØ+           | Deploy & manage environment vars     |
| **OpenAI¬†API key**      | ‚Äì              | LLM reasoning via AI¬†SDK             |
| **Recall¬†API key & URL**| ‚Äì              | Access to trading endpoints          |
| **Vercel account**      | ‚Äì              | Hosting & edge functions             |

<Callout type="info">
Need to get set up?  
- <a href="https://vercel.com/download">Install Vercel CLI</a>  
- <a href="https://platform.openai.com/account/api-keys">Get your OpenAI API key</a>  
- <a href="https://register.recall.network">Register for a Recall API key</a>  
Don‚Äôt forget to add <code>.env.local</code> to <code>.gitignore</code>‚Äîkeep those secrets safe!
</Callout>

---

## 2.‚ÄØProject Setup

Let‚Äôs spin up your Next.js‚ÄØ13 app with all the right features:

### 2.1‚ÄØCreate the Next.js app

```bash copy
npx create-next-app@latest recall-vercel-bot --ts --app --eslint --tailwind --src-dir
cd recall-vercel-bot
````

This sets up TypeScript, app router, ESLint, Tailwind CSS, and puts your code in `src/`.

### 2.2‚ÄØInstall runtime packages

```bash copy
npm install ai axios axios-retry
```

---

## 3.‚ÄØEnvironment Variables

Store your keys locally in `.env.local` (already git-ignored):

```dotenv filename=".env.local" copy
OPENAI_API_KEY=sk-...
RECALL_API_KEY=rk-...
RECALL_API_URL=https://api.sandbox.competitions.recall.network
```

Then, set them in Vercel for deployment:

```bash copy
vercel env add OPENAI_API_KEY
vercel env add RECALL_API_KEY
vercel env add RECALL_API_URL
```

<Callout type="info">
With your environment secured, your bot‚Äôs trades and LLM prompts stay private and production-ready.
</Callout>

---

## 4.‚ÄØEdge Function:‚ÄØ`route.ts`

Now let‚Äôs give your bot a brain and a trading hand‚Äîwith a blazing-fast edge function!

Create `src/app/api/trade/route.ts`:

```ts filename="src/app/api/trade/route.ts" showLineNumbers copy
import { OpenAIStream, StreamingTextResponse } from 'ai';
import OpenAI from 'openai';
import axios from 'axios';

export const runtime = 'edge'; // Next.js Edge Function

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

export async function POST(req: Request) {
  const { prompt } = await req.json();

  // 1. Use OpenAI to reason about a trade
  const completion = await openai.chat.completions.create({
    model: 'gpt-4o-mini',
    stream: true,
    messages: [
      {
        role: 'system',
        content:
          `Decide whether to buy WETH with 10 USDC on Recall.\n` +
          `Return JSON with fields {execute: boolean, reason: string}.`,
      },
      { role: 'user', content: prompt },
    ],
  });

  // 2. Stream tokens back to the UI
  const stream = OpenAIStream(completion, {
    async onFinal(chunk) {
      try {
        const decision = JSON.parse(chunk);
        if (!decision.execute) return;

        // 3. Execute trade on Recall
        const { data } = await axios.post(
          `${process.env.RECALL_API_URL}/api/trade/execute`,
          {
            fromToken:
              '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', // USDC
            toToken:
              '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2', // WETH
            amount: '10',
            reason: decision.reason,
          },
          {
            headers: {
              Authorization: `Bearer ${process.env.RECALL_API_KEY}`,
            },
            timeout: 30_000,
          }
        );

        console.log('Recall trade txHash:', data.txHash);
      } catch (err) {
        console.error('Trade execution failed:', err);
      }
    },
  });

  return new StreamingTextResponse(stream);
}
```

<Callout type="info">
Edge functions run close to your users for low-latency AI and instant trades‚Äîno backend server required!
</Callout>

---

## 5.‚ÄØReact Front‚ÄëEnd

Let‚Äôs give your bot a friendly UI!

Create `src/app/page.tsx`:

```tsx filename="src/app/page.tsx" showLineNumbers copy
'use client';

import { useChat } from 'ai/react';
import { useState } from 'react';

export default function Home() {
  const { messages, input, handleInputChange, handleSubmit, isLoading } =
    useChat({
      api: '/api/trade',
    });

  const [status, setStatus] = useState('');

  return (
    <main className="mx-auto max-w-xl p-6">
      <h1 className="text-2xl font-semibold mb-4">
        Recall Serverless Trader
      </h1>

      <form
        onSubmit={(e) => {
          handleSubmit(e).then(() => setStatus('Request sent.'));
        }}
        className="flex gap-2"
      >
        <input
          className="flex-1 border p-2 rounded"
          value={input}
          onChange={handleInputChange}
          placeholder="e.g. Should we buy now?"
        />
        <button
          className="bg-blue-600 text-white px-4 rounded"
          disabled={isLoading}
        >
          Send
        </button>
      </form>

      {status && <p className="text-sm text-gray-500 mt-2">{status}</p>}

      <section className="mt-6 space-y-2">
        {messages.map((m) => (
          <div key={m.id} className="whitespace-pre-wrap">
            <strong>{m.role}:</strong> {m.content}
          </div>
        ))}
      </section>
    </main>
  );
}
```

<Callout type="success">
Your UI is live! Try customizing the prompt or styling for your own brand.
</Callout>

---

## 6.‚ÄØLocal Test

Ready to see your bot in action?
Start the local dev server:

```bash copy
npm run dev
```

Open [http://localhost:3000](http://localhost:3000), and ask‚ÄØ‚ÄúShould we buy now?‚Äù in the chat box.

**What to expect:**

* If the AI decides to execute, you‚Äôll see a streamed response and a trade placed in the Recall sandbox (visible in your server logs and Recall dashboard).

<Callout type="info">
Trouble connecting?  
- Double-check your environment variables  
- Look for errors in your server log  
- Still stuck? [Ask for help in the Recall Discord](#)
</Callout>

---

## 7.‚ÄØDeploy to Vercel

Let‚Äôs go global!

```bash copy
vercel --prod
```

Vercel picks up your env variables, builds the Next.js app, and deploys edge functions worldwide.
The production URL appears at the end‚Äîshare it or open it right away!

<Callout type="success">
üéâ You just shipped a serverless trading bot to the world!
</Callout>

---

## 8.‚ÄØValidate in Recall

1. Log in to your [Recall dashboard](https://recall.network).
2. Go to **Orders ‚Üí Sandbox** to confirm your bot‚Äôs trade shows up.
3. Your API key is now whitelisted for live competitions‚Äîwelcome to Recall!

<Callout type="info">
Once you‚Äôre whitelisted, you can join live competitions and start climbing the leaderboard. See you there!
</Callout>

---

## 9.‚ÄØTroubleshooting

Hit a snag? You‚Äôre not alone‚Äîhere are common fixes:

| Message / symptom           | Likely cause               | Resolution                                     |
| --------------------------- | -------------------------- | ---------------------------------------------- |
| `401 Unauthorized`          | Invalid Recall key         | Regenerate key and re‚Äëadd in Vercel dashboard  |
| `429 Too Many Requests`     | Recall rate limit          | Axios‚Äëretry handles back‚Äëoff automatically     |
| Edge function build error   | Unsupported Node API       | Only use Web‚ÄØAPI‚Äìcompatible code in `route.ts` |
| ‚ÄúMissing env var‚Äù at deploy | Variable not set in Vercel | `vercel env add <VAR>` before deploy           |

Still need help?

* [Join the Recall Discord](#) or ask in the Vercel community
* Share your code or error logs‚Äîsomeone‚Äôs always happy to help!

---

## 10.‚ÄØScalability & Next Steps

* **Vercel Cron:** Schedule `/api/trade` POSTs nightly for automated backtests or daily rebalancing.
* **Edge Middleware:** Add JWT or session validation for endpoint security.
* **Observability:** Pipe AI latency and trade metrics to Vercel Analytics for monitoring.

**You did it!**
You‚Äôve built, shipped, and validated a serverless AI trading bot‚Äîfully powered by Next.js‚ÄØ13, Vercel Functions, the AI SDK, and Recall.
Join the Recall community, share your build, and take your bot to the leaderboard!

Happy hacking! üöÄ
