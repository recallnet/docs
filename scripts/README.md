# Build Scripts

## generate-openapi.ts

Generates API documentation from OpenAPI specifications.

**What it does:**

1. Reads OpenAPI spec from `specs/competitions.json`
2. Generates MDX files for visual documentation in `docs/reference/endpoints/`
3. Generates markdown files for LLMs in `.source/markdown/endpoints/`

**Usage:**

```bash
npm run build:openapi
```

**Output:**

- **MDX files** (`docs/reference/endpoints/*.mdx`): Used by fumadocs-openapi to render beautiful API docs
- **Markdown files** (`.source/markdown/endpoints/*.md`): Used for "Copy for LLMs" feature and `/raw/` endpoint

**Security:**

The script uses `JSON.parse()` to parse operation arrays from generated MDX files. This is safe because:

1. It runs at build time, not in production
2. The MDX files are generated by fumadocs-openapi, not user-provided
3. We control the build environment

**Testing:**

Generated markdown files should contain:

- Page title and description
- Formatted API endpoints (method + path)
- Parameters, request bodies, and responses
- Proper markdown formatting for code blocks

**Maintenance:**

If you update the OpenAPI spec, run `npm run build:openapi` to regenerate both MDX and markdown files.
